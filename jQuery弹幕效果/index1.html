<!DOCTYPE html>
<html>

	<head>
		<meta charset="UTF-8">
		<title>弹幕效果</title>
		<style>
			* {
				margin: 0;
				padding: 0;
			}
			
			#box {
				width: 100%;
				height: 100%;
			}
			
			#text {
				width: 400px;
				height: 40px;
				border: 3px solid #f10215;
				position: absolute;
				left: 400px;
				top: 160px;
			}
			
			#btn {
				width: 60px;
				height: 46px;
				border: 3px solid #f10215;
				background: #f10215;
				color: #fff;
				position: absolute;
				left: 806px;
				top: 160px;
			}
			
			.string {
				position: absolute;
				overflow: hidden;
				font-family: "楷体";
			}
		</style>
		<script src="http://cdn.bootcss.com/jquery/1.8.3/jquery.js"></script>
		<script type="text/javascript">
			(function($) {
				$(function() {
					let
						pageW = parseInt($(document).width()),
						pageH = parseInt($(document).height()),
						color = ["red", "#12af01", "#981234", "blue", "green", "pink", "#d34a74"],
						size = ["20px", "32px", "44px", "56px", "68px"],
						speed = ["3000", "4000", "5000", "6000", "7000"];

					$('#btn').bind("click", function() {
						let 
						    Span = $("<span class='string'></span>"),
							text = $("#text").val(),
							Top = parseInt(pageH * (Math.random())),
							iIndex = Math.floor(Math.random() * color.length),
							oIndex = Math.floor(Math.random() * size.length),
							kIndex = Math.floor(Math.random() * speed.length);
						Span.text(text);
						Span.css({
							"top": Top,
							"right": 0,
							"font-size": size[oIndex],
							"color": color[iIndex],
						});
						$('#box').append(Span);
						console.log(speed[kIndex]);
						$(".string").animate({
							"right": pageW
						}, 2000, "linear", function() {
							$(this).remove();
						});
					});
				});
			})(jQuery)
		</script>
	</head>

	<body>
		<div id="box">
			<input type="text" id="text" /><button id="btn">发送</button>
		</div>
	</body>

</html>